import{d as Ot,e as Ut,f as Nt,h as Ft,i as jt,l as Zt,m as ne,n as Pn,o as Cn,p as kn,q as wn}from"https://app.gitbook.com/public/app/chunks/chunk-JL6FGTYW.min.js";import{b as Ht,h as Rn,i as Tn}from"https://app.gitbook.com/public/app/chunks/chunk-XYR3PNS7.min.js";import{f as Ie,g as hn,j as Sn,m as Me}from"https://app.gitbook.com/public/app/chunks/chunk-6JUCEPFG.min.js";import{a as Bt}from"https://app.gitbook.com/public/app/chunks/chunk-E3HAJTYE.min.js";import{a as vn}from"https://app.gitbook.com/public/app/chunks/chunk-OUIVKBJ3.min.js";import{a as ee,b as w}from"https://app.gitbook.com/public/app/chunks/chunk-PFX224MU.min.js";import{a as Gt,b as we,c as Kt,d as $t,e as gn,f as bn,g as xn}from"https://app.gitbook.com/public/app/chunks/chunk-ULSZV5RL.min.js";import{b as on}from"https://app.gitbook.com/public/app/chunks/chunk-FPUVMJTY.min.js";import{A as Ee,B as pn,s as qt,v as Z,z as cn}from"https://app.gitbook.com/public/app/chunks/chunk-LOPLMUZU.min.js";import{a as rn}from"https://app.gitbook.com/public/app/chunks/chunk-JFA55XWO.min.js";import{a as de}from"https://app.gitbook.com/public/app/chunks/chunk-3L77X6DV.min.js";import{a as be,b as $e,f as sn,g as W,h as Rt,i as ot,j as fn}from"https://app.gitbook.com/public/app/chunks/chunk-GETT5FTF.min.js";import{e as nn}from"https://app.gitbook.com/public/app/chunks/chunk-4TNLUS2C.min.js";import{a as Xt}from"https://app.gitbook.com/public/app/chunks/chunk-L5AUBCO5.min.js";import{a as se}from"https://app.gitbook.com/public/app/chunks/chunk-GZCG3LB4.min.js";import{a as Le}from"https://app.gitbook.com/public/app/chunks/chunk-PDUFX233.min.js";import{a as an}from"https://app.gitbook.com/public/app/chunks/chunk-OHFNFAFN.min.js";import{a as Ze,c as le,h as en,m as tn}from"https://app.gitbook.com/public/app/chunks/chunk-XCKCT3V4.min.js";import{f as yn}from"https://app.gitbook.com/public/app/chunks/chunk-M64GIA4V.min.js";import{a as It}from"https://app.gitbook.com/public/app/chunks/chunk-CZ6ORUN2.min.js";import{a as et}from"https://app.gitbook.com/public/app/chunks/chunk-33CORMFE.min.js";import{a as un,e as it}from"https://app.gitbook.com/public/app/chunks/chunk-BFAQCM6W.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-2SCDJVJ3.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-Z4LV24DL.min.js";import{a as ze}from"https://app.gitbook.com/public/app/chunks/chunk-G5RYHNOD.min.js";import{a as me,c as Je,d as Jt,e as ie}from"https://app.gitbook.com/public/app/chunks/chunk-3UXFXPX4.min.js";import{a as tt}from"https://app.gitbook.com/public/app/chunks/chunk-TT7Y5XGJ.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-FFW7Q6KT.min.js";import{a as K,f as Te}from"https://app.gitbook.com/public/app/chunks/chunk-ITXRCUXO.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-JNUJ225D.min.js";import{d as pe}from"https://app.gitbook.com/public/app/chunks/chunk-565RJARM.min.js";import{A as Ye,B as Ae,E as p,G as $,H as Xe,_ as v,i as Yt}from"https://app.gitbook.com/public/app/chunks/chunk-TI5JEI7I.min.js";import{Ab as We,Bb as I,Db as V,Eb as Qt,Jb as k,Sb as nt,V as Vt,Wb as ln,bb as x,bc as O,cc as mn,fb as L,ga as At,ha as _t,ia as xe,ib as Ke,ic as vt,jc as dn,ka as He,la as qe,mb as bt,mc as he,zb as Wt}from"https://app.gitbook.com/public/app/chunks/chunk-4WQJWWQB.min.js";import{a as ke,ib as Mt}from"https://app.gitbook.com/public/app/chunks/chunk-JFUPD3OE.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-SUOJ42Z6.min.js";import{a as zt}from"https://app.gitbook.com/public/app/chunks/chunk-HCFMPDL2.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-AHBDZVSS.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-CIHAFBKJ.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-EDXCWIHG.min.js";import{f as Dt}from"https://app.gitbook.com/public/app/chunks/chunk-QDU35MW3.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-XQJO7322.min.js";import{$ as ht,A as je,Ca as H,D as C,Da as Qe,O as N,R as Tt,S as Lt,W as Et,aa as ue,ba as s,ca as y,p as S,x as d,za as B}from"https://app.gitbook.com/public/app/chunks/chunk-A6UFY6RP.min.js";import"https://app.gitbook.com/public/app/chunks/chunk-T55DX4SB.min.js";import{b as Ge,d as De}from"https://app.gitbook.com/public/app/chunks/chunk-YPOOS4GR.min.js";import{c as li,e as R,l as c}from"https://app.gitbook.com/public/app/chunks/chunk-OAKVUAEN.min.js";var En=li((St,Pt)=>{c();(function(t,e){typeof St=="object"&&typeof Pt<"u"?Pt.exports=e():typeof define=="function"&&define.amd?define(e):t.isEmailMaybe=e()})(St,function(){"use strict";var t=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;e.regex=t;function e(i){return t.test(i)}return e})});c();var A=R(S());N();c();var P=R(S());N();c();function Ln(t){let{space:e,screen:i,changeRequest:n}=t,o=ci(e,n,i),a=yn({space:e.key,revision:o},`${e.key}-${n==null?void 0:n.key}`);if(!a&&!i.revision)throw new Error(`Main revision "${o}" not found`);return a}function ci(t,e,i){return i.revision?i.revision:e?e.revisionCurrent:t.revision}c();var ce=R(S());N();c();var q=R(S());N();function at(t){let{contentRef:e,content:i,style:n}=t,[o,a]=K(),[r,m]=q.useState(i.path||""),[u,g]=q.useState(null),l=Te(),[,h]=B(H),G=q.useRef(i.path),ae=pn.read(i),te=x(e),X=Dt(r),re=async()=>{if(!o){try{await a(async()=>{await $t(e,r)}),G.current=r,l.notify({kind:"success",title:"URL settings saved",details:"Your content is now accessible at the new URL.",icon:p.CheckCircle})}catch(ye){if(ye.expose){g(ye);return}throw l.notify({kind:"danger",title:"Error while saving URL settings",details:"Please try again or contact support if the problem persists.",icon:p.Alert,timeout:4e3}),ye}te?k(I(i,{type:"space_edit_publish_path"})):He(e)&&k(V(i,{type:"collection_edit_publish_path"}))}},Ue=o||!X||!r.length||G.current===r;return q.createElement(d,{style:n},q.createElement(d,{style:[y.directionRow,y.alignEnd]},q.createElement(le,{value:r,onChangeText:m,size:"medium",label:te?"Space URL":"Collection URL",prefix:ae?Z(ae):void 0,feedback:u?{type:"danger",message:u.message}:X?{type:"none"}:{type:"danger",message:"URL can only include lowercase characters, numbers and -.+_"},style:[s.Margin.smallRight,y.flex1]}),q.createElement(v,{icon:o?$:void 0,kind:Ue?"secondary":"primary",disabled:Ue,onPress:re,size:"medium"},"Save")),q.createElement(d,{style:[y.directionRow,y.alignCenter,s.Margin.smallTop]},q.createElement(d,{style:[s.Margin.smallRight,s.Margin.xsmallLeft]},q.createElement(p.InfoCircle,{size:ue.ICON_M,style:[h.info]})),q.createElement(d,{style:[y.flex1]},q.createElement(C,{style:[h.Caption,h.info]},"Old URLs will be redirected automatically."))))}c();var In=R(S());function rt(t){let{content:e,children:i,...n}=t,o=Ze(),a=Ee.read(e);return In.createElement(v,{icon:p.Link,...n,onPress:()=>{o.writeTextAndNotify(Z(a))}},i||`Copy ${e.visibility!=="private"?"published ":""}link`)}function st(t){let{contentRef:e,content:i,style:n}=t;return ce.createElement(ce.Fragment,null,ce.createElement(w,{title:"Customize URL",style:n,button:ce.createElement(rt,{size:"medium",content:i})},i.customHostname?null:ce.createElement(at,{content:i,contentRef:e}),i.visibility==="in-collection"?null:ce.createElement(d,{style:i.customHostname?null:s.Margin.largeTop},ce.createElement(kn,{owner:i,pointer:qt(e),analyticsContext:We(i,{}),size:"medium"}))))}c();var lt=R(S());function ct(t){let{style:e}=t;return lt.createElement(w,{style:e},lt.createElement(ee,{label:"Customize the look and feel",labelDescription:"Configure how the content should look like, from colors to sizes."},lt.createElement(de,{kind:"secondary",size:"medium",icon:p.Customization,to:{current:{sideSheet:{type:"customize"}}}},"Customize")))}c();var _e=R(S());N();function ut(t){let{children:e,style:i}=t,[,n]=B(H),[,o]=B(ui);return _e.createElement(d,{style:[o.delimiter,i]},_e.createElement(d,{style:[o.delimiterLine]}),_e.createElement(d,{style:[o.delimiterText]},_e.createElement(C,{style:[n.Caption,n.textMid]},e)))}var ui=Qe.create({delimiter:t=>({alignItems:"center",justifyContent:"center",height:ue.BUTTON_M}),delimiterText:t=>({paddingVertical:s.small,paddingHorizontal:s.large,backgroundColor:t.colors.background.muted}),delimiterLine:t=>({backgroundColor:t.colors.border.main,height:1,position:"absolute",left:0,right:0,top:"50%"})});c();var Q=R(S());c();var Oe=R(S());var Ct={["public"]:p.PublishStatusPublic,["in-collection"]:p.PublishStatusInCollection,["private"]:p.Lock,["unlisted"]:p.PublishStatusUnlisted,["visitor-auth"]:p.PublishStatusVisitorAuth,["share-link"]:p.PublishStatusShareLink};function ve(t){let{content:e,visibility:i,label:n,labelDescription:o,children:a,style:r}=t,[m,u]=K(),g=Te(),l=!!t.disabled||e.visibility!=="private"&&e.visibility!==i,h=e.visibility===i;return Oe.createElement(w,{style:r,disabled:l},Oe.createElement(ee,{icon:()=>Oe.createElement(me,{icon:m?$:Ct[i],kind:h?"primary":"secondary",size:"large",disabled:l}),label:n,labelDescription:o},Oe.createElement(Le,{value:h,onValueChange:async ae=>{if(l)return;let te=async X=>{let re=await nt();L(e)?await re.spaces.updateSpaceById(e.key,{visibility:X}):await re.collections.updateCollectionById(e.key,{visibility:X}),k(L(e)?I(e,{type:"space_edit_visibility",visibility:X,previousVisibility:e.visibility}):V(e,{type:"collection_edit_visibility",visibility:X,previousVisibility:e.visibility}))};try{await u(async()=>{ae&&e.visibility==="private"?await te(i):!ae&&e.visibility===i&&await te("private")})}catch(X){throw g.notify({kind:"danger",title:`Error while publishing the ${L(e)?"space":"collection"}`,details:"Please try again or contact support if the problem persists.",timeout:4e3}),X}},disabled:l||m})),a)}function mt(t){let{content:e,contentRef:i}=t,{getNavigationLinkProps:n}=pe(),[o]=mn([e.collection?qe(e.collection):null]),a=o==null?void 0:o.result;if(!a||a.visibility==="private"&&e.visibility!=="in-collection")return null;let r=Q.createElement(W,{kind:"in-text-muted",...n({current:{type:"collection",collection:a.key}})},a==null?void 0:a.title),m=a.visibility==="private"&&e.visibility==="in-collection"?Q.createElement(Q.Fragment,null,"This space was previously published as part of the ",r," collection which is currently not published. ",`

`,"The content is not currently published. You can always publish this space separately or publish the parent collection to see this content live."):Q.createElement(Q.Fragment,null,"This space is part of a published collection ",r,". Publishing it will make it available to the collection's audience.");return Q.createElement(Q.Fragment,null,Q.createElement(ve,{content:e,visibility:"in-collection",label:"Publish in collection",labelDescription:m},e.visibility==="in-collection"?Q.createElement(at,{content:e,contentRef:i,style:[s.Margin.largeTop]}):null),Q.createElement(ut,{style:[s.Margin.largeVertical]},"or publish this content directly"))}c();var Ve=R(S());function zn(t){let e=Ve.useRef(t.visibility),[i,n]=Ve.useState(!1);return Ve.useEffect(()=>{e.current!==t.visibility&&t.visibility==="public"&&n(!0),e.current=t.visibility},[t.visibility]),[i,n]}function Vn(t){let{content:e,onBack:i}=t,[,n]=B(H),[,o]=B(Bn),{getNavigationLinkProps:a}=pe(),[r,m]=P.useState(null);it(L(e)?I(e,{screen:"space_publish_success"}):V(e,{screen:"collection_publish_success"}),[e]);let u;return e.visibility==="public"?u=a({screen:{type:L(e)?"space":"collection",...L(e)?{space:e.key}:{collection:e.key},sideSheet:{type:"customize"}}}):e.visibility==="in-collection"&&(u=a({screen:{type:"collection",collection:e.collection,sideSheet:{type:"customize"}}})),P.createElement(P.Fragment,null,P.createElement(d,{style:[o.modal]},P.createElement(v,{style:[o.backAction],kind:"grey",rounded:!0,icon:p.ArrowLeft,onPress:i}),P.createElement(d,{style:[o.container,y.directionRow,y.justifyContentCenter]},P.createElement(d,{style:[y.flex1,o.modalContent]},P.createElement(C,{style:[n.Heading1,n.text]},P.createElement(C,{style:[o.heading]},"Nice!")," Your site is published"),P.createElement(wn,{content:e}),P.createElement(d,{style:[o.divider]},P.createElement(C,{style:[o.dividerText,{transform:"translate(-50%, -50%)"},n.Uppercase,n.textMid]},"What's Next?")),P.createElement(d,{style:[y.directionRow,o.nextActionsContainer]},P.createElement(Mn,{title:"Customize your site",subtitle:"Brand your site to make it your own",IconCo:p.Customization,...u}),P.createElement(Mn,{title:"Add a custom domain",subtitle:"Link up a unique custom domain",onPress:()=>m("customHostname"),IconCo:p.Globe})))),r==="customHostname"?P.createElement(Cn,{pointer:L(e)?{type:"space",space:e.key}:{type:"collection",collection:e.key},analyticsContext:We(e,{}),onClose:()=>{m(null),i()}}):null))}function Mn(t){let{title:e,subtitle:i,IconCo:n,onPress:o}=t,[,a]=B(H),[,r]=B(Bn);return P.createElement(Yt.TouchableOpacity,{style:[r.nextAction,y.directionRow,y.alignCenter],hoverStyle:r.nextActionHovered,onPress:o},P.createElement(d,{style:[r.nextActionIcon]},P.createElement(n,{size:ue.ICON_L,style:[a.Bold,,r.nextActionIconColor]})),P.createElement(d,{style:[s.Margin.mediumLeft]},P.createElement(C,{style:[a.Heading3,a.text,a.Medium]},e),P.createElement(C,{style:[a.textMuted,a.Caption]},i)))}var Bn=Qe.create({modal:{height:660,maxHeight:"80vh"},container:()=>({margin:"auto",width:"100%",maxWidth:600}),modalContent:{alignItems:"center",rowGap:s.large},heading:t=>({color:ht.primary.base}),backAction:{position:"absolute",top:s.small,left:s.small},publishedSiteInfoContainer:t=>({width:"100%",borderWidth:1,borderColor:t.colors.border.main,borderRadius:t.radiuses.medium}),publishedSiteInfo:t=>({maxWidth:"100%",borderWidth:1,borderColor:t.colors.border.main,backgroundColor:t.colors.background.muted,borderRadius:t.radiuses.medium}),divider:t=>({position:"relative",width:"100%",height:1,backgroundColor:t.colors.border.main}),dividerText:t=>({paddingHorizontal:s.small,position:"absolute",left:"50%",backgroundColor:t.colors.background.main}),nextActionsContainer:()=>({width:"100%",gap:s.medium}),nextAction:t=>({borderWidth:1,borderColor:t.colors.border.main,borderRadius:t.radiuses.medium,padding:s.medium,flexGrow:.5}),nextActionHovered:t=>({backgroundColor:t.colors.background.muted}),nextActionIcon:t=>({backgroundColor:t.colors.background.mid,borderRadius:t.radiuses.xlarge,padding:s.small}),nextActionIconColor:t=>({color:ht.primary.base})});c();var T=R(S());c();var Dn=R(S());function An(){let[t,e]=Dn.useState(null);return[t,async n=>{let{space:o,changeRequestKey:a,page:r,pageOnly:m=!1}=n;k(a?Qt(o,a,{type:"space_export",source:"pdf"}):I(o,{type:"space_export",source:"pdf"})),e({type:"loading"});try{let u={space:o.key,...a?{changeRequest:a}:{},...r?{page:r.key,pageOnly:m}:{}},l=await ke.functions().httpsCallable("ssr-exportPDF",{timeout:540*1e3})(u),{downloadURL:h}=l.data;e({type:"success",downloadURL:h})}catch(u){e({type:"error",error:u})}}]}function _n(t){return T.useContext(un).mode==="public-content"?T.createElement(On,{...t,upgrade:void 0}):T.createElement(mi,{...t})}function mi(t){let{content:e}=t,i=Ie(e,"pdf-export");return T.createElement(On,{...t,upgrade:i})}function On(t){let{content:e,upgrade:i}=t,[n,o]=An(),{screen:a}=cn();if(a.type!=="space")throw new Error("TabExportPDF should only be displayed in the context of a space");let r=gn(e.key,a.type==="space"?a.changeRequest:void 0),m=Ln({space:e,changeRequest:r,screen:a});if(!m)throw new Error("Revision not found");let[,u]=bn(m,a),g=u&&u.pages.length>0;return T.createElement(ne,{title:"Export to PDF",subtitle:"Save this content to your computer as a PDF file, to be shared offline or printed."},i?T.createElement(se,{kind:"upgrade",title:"Exporting to PDF requires the Pro plan",details:"Please subscribe or upgrade your subscription to be able to access advanced features like visitor authentication or PDF export.",style:s.Margin.mediumBottom,actions:[{label:i.children,onPress:()=>{i.onPress()},buttonKind:"upgrade"}]}):null,T.createElement(w,{disabled:!!i},u?T.createElement(ee,{icon:()=>T.createElement(me,{icon:p.FileText,kind:"secondary",size:"large"}),label:"Only this page",labelDescription:"Export only the content of the current page.",style:s.Margin.largeBottom},T.createElement(et,{kind:"secondary",size:"medium",disabled:!!i,testID:"pdfExport.exportPageButton",onPress:()=>o({space:e,changeRequestKey:r==null?void 0:r.key,page:u,pageOnly:!0})},"Export")):null,g?T.createElement(ee,{icon:()=>T.createElement(me,{icon:p.Folder,kind:"secondary",size:"large"}),label:"This page and its subpages",labelDescription:"Export this page and all of its subpages.",style:s.Margin.largeBottom},T.createElement(et,{kind:"secondary",size:"medium",disabled:!!i,testID:"pdfExport.exportPagesButton",onPress:()=>o({space:e,changeRequestKey:r==null?void 0:r.key,page:u,pageOnly:!1})},"Export")):null,T.createElement(ee,{icon:()=>T.createElement(me,{icon:p.Space,kind:"secondary",size:"large"}),label:"Entire space",labelDescription:"Export all pages from the space."},T.createElement(et,{kind:"secondary",size:"medium",disabled:!!i,testID:"pdfExport.exportSpaceButton",onPress:()=>o({space:e,changeRequestKey:r==null?void 0:r.key})},"Export"))),(n==null?void 0:n.type)==="success"?T.createElement(w,{style:s.Margin.mediumTop},T.createElement(ee,{label:"Download the generated PDF file",labelDescription:"You can download the PDF file from this URL for the next hour."},T.createElement(v,{kind:"primary",size:"medium",icon:p.Download,testID:"pdfExport.downloadButton",href:n.downloadURL,onPress:l=>{l.preventDefault(),n.type==="success"&&sn(n.downloadURL)}},"Download"))):null,(n==null?void 0:n.type)==="error"?T.createElement(se,{testID:"pdfExport.errorAlert",kind:"danger",title:"Error while exporting content to PDF",details:It(n.error),style:s.Margin.mediumTop}):null)}c();var pt=R(S());c();var Se=R(S());N();c();var f=R(S());N();function Nn(t){let{organization:e,contentRef:i,content:n}=t,o=f.useMemo(()=>At(i),[i]),a=f.useMemo(()=>_t(i),[i]),[r,m]=O([o,a]),u=f.useCallback(l=>{if("team"in l.item)return f.createElement(di,{item:l.item,buttons:[f.createElement(Un,{content:n,item:l.item,itemRef:o.doc(l.item.team)})]});if("user"in l.item)return f.createElement(fi,{item:l.item,buttons:[f.createElement(Un,{content:n,item:l.item,itemRef:a.doc(l.item.user)})]});throw Error("Invalid renderItem type")},[o,a]),g=[...r,...m];return f.createElement(w,{title:"Members with access",button:f.createElement(de,{size:"small",to:{current:{sideSheet:{type:"share",tab:"permissions"}}}},"See everyone who has access")},n.collection?f.createElement(yi,{content:n,contentRef:i,readOnly:!1}):f.createElement(gi,{organization:e,content:n,contentRef:i,readOnly:!1}),f.createElement(je,{data:g,renderItem:u,keyExtractor:pi}))}function pi(t){if("team"in t)return t.team;if("user"in t)return t.user;throw Error("Invalid keyExtractor type")}function di(t){let{item:e,...i}=t,[n]=O([Ht(e.organization,e.team)]),o=f.useMemo(()=>n?Ae(Tn,{team:n}):void 0,[n]);return n?f.createElement(ie,{...i,layout:"wide",icon:o,title:n.title,hint:f.createElement(f.Fragment,null,n.members.length," ",f.createElement(rn,{count:n.members.length,singular:"member",plural:"members"}))}):null}function fi(t){let{item:e,...i}=t,[n]=O([Vt(e.user)]),o=he(),a=Ye(ze,{user:n},[n]);return n?f.createElement(ie,{...i,layout:"wide",icon:a,title:`${n.displayName}${o.uid===n.uid?" (you)":""}`,hint:n.email}):null}function Un(t){let{itemRef:e,item:i,content:n,readOnly:o}=t,a=he(),[r,m]=K(),u=l=>{m(async()=>await e.update({level:l}))},g=async()=>{m(async()=>{await e.update({deletedBy:a.uid}),await e.delete()})};return f.createElement(Me,{size:"medium",kind:"secondary",rightIcon:p.ChevronDown,organization:n.organization,value:i.level,onValueChange:u,onRemove:g,disabled:o||r,icon:r?$:void 0})}function yi(t){let{content:e,contentRef:i,readOnly:n}=t;if(!e.collection)throw new Error("expected a collection");let[,o]=B(H),[a]=O([qe(e.collection)]),r=f.useMemo(()=>a?Ae(Rn,{collection:a}):void 0,[a]);return a?f.createElement(ie,{icon:r,layout:"wide",title:f.createElement(f.Fragment,null,"Anyone in ",f.createElement(C,{style:o.Bold},a.title)),buttons:[f.createElement(Fn,{content:e,contentRef:i,readOnly:n})]}):null}function gi(t){let{organization:e,content:i,contentRef:n,readOnly:o}=t,[,a]=B(H),r=Ye(vn,{org:e},[e]);return f.createElement(f.Fragment,null,f.createElement(ie,{icon:r,layout:"wide",title:f.createElement(f.Fragment,null,"Anyone in ",f.createElement(C,{style:a.Bold},e.title)),buttons:[f.createElement(Fn,{content:i,contentRef:n,readOnly:o})]}),i.defaultPermission&&e.defaultRole?f.createElement(f.Fragment,null,e.emailDomains.map(m=>f.createElement(bi,{defaultPermission:i.defaultPermission,organization:e,emailDomain:m}))):null)}function bi(t){let{defaultPermission:e,organization:i,emailDomain:n}=t,o=Ye(Je,{icon:p.Email},[i]),[,a]=B(H);return f.createElement(ie,{icon:o,layout:"wide",title:f.createElement(f.Fragment,null,"Anyone with a ",f.createElement(C,{style:a.Bold},n)," email address"),buttons:[f.createElement(Me,{organization:i.key,allowInherit:!0,allowNullValue:!0,disabled:!0,value:e==="inherit"?i.defaultRole||null:e,onValueChange:r=>{},size:"medium",kind:"secondary"})]})}function Fn(t){let{content:e,contentRef:i,readOnly:n}=t,[o,a]=K();return f.createElement(Me,{organization:e.organization,allowInherit:!0,allowNullValue:!0,disabled:n||o,value:e.defaultPermission,onValueChange:r=>{a(()=>i.update({defaultPermission:r})),k(x(i)?I(e,{type:"space_edit_default_permissions",permissionLevel:r}):V(e,{type:"collection_edit_default_permissions",permissionLevel:r}))},rightIcon:p.ChevronDown,icon:o?$:void 0,size:"medium",kind:"secondary"})}c();var jn=R(En()),E=R(S());N();c();var kt=Tt({key:"inviteMembersInputAtom",default:[]}),Fa=Lt({key:"inviteMembersInputIsEmptySelector",get:({get:t})=>t(kt).length===0});function Hn(t){var wt;let{contentRef:e,content:i}=t,n=Te(),o=he(),a=dn(),r=i.organization,m=$e((wt=a.permissions.organizations[r])==null?void 0:wt.role,"add-guests"),[u,g]=Et(kt),[l,h]=E.useState(""),[G,ae]=E.useState("edit"),[te,X]=E.useState(!1),[re,Ue]=K(),ye=E.useRef(null),xt=E.useRef(null),Be=tn(xt),ii=E.useMemo(()=>[{key:"guest-member",commands:[{key:"guest-member.option",title:"Invite as organization member",subtitle:"granting access to content in the organization",enabled:!te,trigger:()=>{X(_=>!_)}}]}],[te]);E.useEffect(()=>{var _;(_=ye.current)==null||_.focus()},[]),E.useEffect(()=>{if(!l){Be.close();return}Be.opened||Be.open(vi(_=>{var ge;g(Ne=>[...Ne,_]),h(""),Be.close(),(ge=ye.current)==null||ge.focus()},r,m)),Be.typeQuery(l)},[l,r]);let oi=()=>{h("")},ai=E.useMemo(()=>()=>{g([]),h(""),ae("read")},[g,h,ae]),{emails:ft,users:ri,teams:yt}=E.useMemo(()=>({emails:u.filter(_=>_.type==="email"),users:u.filter(_=>_.type==="user"),teams:u.filter(_=>_.type==="team")}),[u,r]),si=()=>{if(ft.length>bt){n.notify({kind:"danger",title:"Error while updating the permissions",details:`You can only invite up to ${bt} emails at once.`,timeout:4e3});return}Ue(async()=>{let _=ri.map(J=>J.user),ge=0;if(ft.length>0)try{let J=await nt(),{data:Fe}=await J.organizations.inviteUsersToOrganization(i.organization,{emails:ft.map(gt=>gt.email),role:te?null:G});_=_.concat(...Fe.users),te&&(ge=Fe.invited)}catch(J){throw n.notify({kind:"danger",title:"Error while inviting",details:J.expose?J.message:"An error occurred"}),J}await Mt(J=>{let Fe=e.collection("user-permissions"),gt=e.collection("team-permissions");_.forEach(Ce=>{J.set(Fe.doc(Ce),{user:Ce,level:G,createdBy:o.uid})}),yt.forEach(Ce=>{J.set(gt.doc(Ce.team),{team:Ce.team,organization:Ce.organization,level:G,createdBy:o.uid})}),J.update(e,{private:ke.firestore.FieldValue.delete()})});let Ne=_.length-ge;n.notify({kind:"success",icon:p.Check,title:"Successfully sent invites"}),ai(),x(e)?k(I(i,{type:"space_edit_permissions",teamsAdded:yt.length,usersAdded:Ne,guestsAdded:ge,permissionLevel:G})):He(e)&&k(V(i,{type:"collection_edit_permissions",teamsAdded:yt.length,usersAdded:Ne,guestsAdded:ge,permissionLevel:G}))})};return E.createElement(d,{style:[y.directionRow,y.alignCenter]},E.createElement(Zt,{ref:ye,wrapperRef:xt,placeholder:"Add someone, a team, or an email",value:u,text:l,onChangeText:h,onChangeValue:g,onEnterTag:oi,renderTag:Ri,disabled:re,tagDelimiters:["Enter","Tab"],button:E.createElement(Me,{size:"small",organization:i.organization,value:G,onValueChange:ae,rightIcon:p.ChevronDown,icon:null,extraPaletteGroups:ii}),style:[y.flex1]}),E.createElement(d,null,E.createElement(v,{kind:re||u.length===0?"secondary":"primary",size:"large",style:s.Margin.smallLeft,icon:re?$:void 0,disabled:re||u.length===0,onPress:si},"Invite")))}function Ri(t){switch(t.type){case"email":return t.email;case"user":return t.displayName;case"team":return t.title;default:Ge(t)}}function vi(t,e,i){return en({position:{width:"anchor"},groups:[{key:"email",commands:n=>{let{text:o}=n.query;return!i||!(0,jn.default)(o)?[]:[{key:o,title:o,icon:p.Email,trigger:()=>{t({type:"email",email:o})}}]}},{key:"users",commands:n=>{let{text:o}=n.query;return vt.read({query:o,types:["users"],filters:{users:`memberOfOrg:${e}`}}).map(r=>r.index!=="users"?null:{key:r.object.objectID,icon:({size:m})=>E.createElement(ze,{user:r.object,size:m}),title:r.object.displayName,subtitle:r.object.email,trigger:()=>{t({type:"user",displayName:r.object.displayName,user:r.object.objectID})}}).filter(De)}},{key:"teams",commands:n=>{let{text:o}=n.query;return vt.read({query:o,types:["teams"],filters:{teams:`orgKey:${e}`}}).map(r=>r.index!=="teams"?null:{key:r.object.objectID,icon:p.Users,title:r.object.title,trigger:()=>{t({type:"team",title:r.object.title,organization:r.object.orgKey,team:r.object.team})}}).filter(De)}}]})}function qn(t){let{content:e,contentRef:i,canEditPermissions:n}=t,[o]=O([Ke(e.organization)]);if(!o)throw new Error("Organization not found");return Se.createElement(Se.Fragment,null,Se.createElement(d,{style:[s.Margin.mediumBottom]},Se.createElement(Hn,{content:e,contentRef:i})),Se.createElement(Nn,{organization:o,content:e,contentRef:i,readOnly:!n}))}c();var Pe=R(S());N();function Gn(t){let{content:e,contentRef:i}=t,n=e.organization,o=x(i)?Ut(n,e.key):Nt(n,e.key),[a]=O([o]),r=he(),m=Pe.default.useCallback(async u=>{let g=x(i)?Ft({role:null,createdBy:r.uid,contentLevel:u,space:i.id}):jt({role:null,createdBy:r.uid,contentLevel:u,collection:i.id});k(Wt(n,{type:"organization_create_invite_link",role:u,...x(i)?{space:i.id}:{collection:i.id}})),Ot(n,g.key).set(g)},[n,i]);return Pe.default.createElement(w,{title:"Invite links",style:[s.Margin.largeTop],button:a.length>0?null:Pe.default.createElement(Le,{value:a.length>0,onValueChange:u=>{u&&m("edit")}})},a.length>0?Pe.default.createElement(d,null,a.map((u,g)=>Pe.default.createElement(d,{key:u.key,style:g<a.length-1&&s.Margin.mediumBottom},Pe.default.createElement(Pn,{organization:n,invite:u})))):null)}function Kn(t){let{content:e,contentRef:i}=t,[n]=O([Ke(e.organization)]);if(!n)throw new Error("Organization not found");let o=ot(i),a=fn(e),r=be(o,"edit-permissions"),m=!n.inviteLinksDisabled&&$e(a,"view-invite-links");return pt.createElement(ne,{title:"Invite members",subtitle:"Invite people to your content and start collaborating straight away."},pt.createElement(qn,{...t,canEditPermissions:r}),m?pt.createElement(Gn,{...t}):null)}c();var j=R(S());c();var Y=R(S());N();function $n(t){let{content:e,contentRef:i}=t,[n]=O([Bt(e.organization)]),o=20,{data:a,next:r,previous:m}=ln(x(i)?{operationId:"listPermissionsAggregateInSpace",params:{spaceId:i.id},query:{limit:o}}:{operationId:"listPermissionsAggregateInCollection",params:{collectionId:i.id},query:{limit:o}}),u=Y.useCallback(({item:l})=>Y.createElement(ie,{icon:Ae(ze,{user:l.user,tooltip:!1}),title:l.user.displayName,hint:l.user.email,layout:"wide",buttons:[Y.createElement(Xt,{size:"medium"},Sn[l.permission].title)]}),[]),g=Y.useCallback(l=>l.user.id,[]);return Y.createElement(w,{title:"Members access",button:Y.createElement(de,{size:"small",to:{current:{sideSheet:{type:"share",tab:"invite"}}}},a.count||1," out of ",(n==null?void 0:n.members)||1)},Y.createElement(je,{data:a.items,renderItem:u,keyExtractor:g}),r||m?Y.createElement(d,{style:[y.directionRow,y.justifyContentEnd,s.Margin.mediumTop]},m?Y.createElement(v,{icon:p.ChevronLeft,kind:"grey",size:"medium",onPress:m,style:s.Margin.mediumLeft},"Previous"):null,r?Y.createElement(v,{rightIcon:p.ChevronRight,kind:"grey",size:"medium",onPress:r,style:s.Margin.mediumLeft},"Next"):null):null)}c();var b=R(S());N();c();var D=R(S());c();var M=R(S());N();c();var fe=R(S());N();function Wn(t){let{content:e,contentRef:i,onClose:n}=t,[o,a]=K(),[r,m]=fe.useState(""),u=()=>{a(async()=>{let g={key:zt(),createdAt:ke.firestore.Timestamp.now(),name:r,active:!0};await we(i,g.key).set(g),x(i)?k(I(e,{type:"space_edit_publish_create_share_link"})):k(V(e,{type:"collection_edit_publish_create_share_link"})),n()})};return fe.createElement(tt,{title:"Create new share link",onClose:n,footer:fe.createElement(d,{style:[y.directionRow,y.justifyContentEnd]},fe.createElement(v,{kind:"secondary",style:s.Margin.smallRight,onPress:n},"Close"),fe.createElement(v,{kind:"primary",disabled:o,icon:o?$:void 0,style:s.Margin.smallRight,onPress:u},"Create"))},fe.createElement(le,{value:r,onChangeText:m,placeholder:"Untitled",autoFocus:!0,disabled:o,maxLength:50,label:"Name",labelDescription:"This name will be used to identify the share link. Only visible to admins and creators in the content."}))}c();var z=R(S());N();function Qn(t){let{url:e,content:i,contentRef:n,shareLink:o}=t,[a,r]=z.useState(null),m=Ze(),u=h=>{x(n)?k(I(i,{type:h?"space_edit_publish_enable_share_link":"space_edit_publish_disable_share_link"})):k(V(i,{type:h?"collection_edit_publish_enable_share_link":"collection_edit_publish_disable_share_link"})),we(n,o.key).update({active:h})},g=h=>{r(null),h&&(x(n)?k(I(i,{type:"space_edit_publish_revoke_share_link"})):k(V(i,{type:"collection_edit_publish_revoke_share_link"})),we(n,o.key).delete())},l=async h=>{if(h===o.name){r(null);return}x(n)?k(I(i,{type:"space_edit_publish_rename_share_link"})):k(V(i,{type:"collection_edit_publish_rename_share_link"})),await we(n,o.key).update({name:h}),r(null)};return z.createElement(z.Fragment,null,z.createElement(ie,{style:[s.Padding.noneHorizontal,s.Padding.noneTop],icon:()=>z.createElement(Le,{value:o.active!==!1,onValueChange:u}),title:o.name||"Untitled",hint:z.createElement(W,{url:e},e),buttons:[z.createElement(v,{icon:p.Copy,title:"Copy",size:"medium",onPress:()=>{m.writeTextAndNotify(e,{title:"Invite link copied to clipboard",details:"Paste it anywhere to share."})}}),z.createElement(v,{icon:p.Edit,title:"Rename",size:"medium",onPress:()=>r("rename")}),z.createElement(v,{icon:p.Trashcan,title:"Revoke",size:"medium",onPress:()=>r("revoke")})]}),a==="revoke"?z.createElement(nn,{kind:"danger",confirmButtonText:"Revoke",title:"Revoke link",onComplete:g},"Once the share link is revoked, no one can access the content using it. This action cannot be undone."):null,a==="rename"?z.createElement(Si,{initialName:o.name||"",onComplete:l,onClose:()=>r(null)}):null)}function Si(t){let{initialName:e,onComplete:i,onClose:n}=t,[o,a]=K(),[r,m]=z.useState(e),u=()=>{a(()=>i(r))};return z.createElement(tt,{title:"Rename share link",onClose:n,footer:z.createElement(d,{style:[y.directionRow,y.justifyContentEnd]},z.createElement(v,{kind:"secondary",style:s.Margin.smallRight,onPress:n},"Close"),z.createElement(v,{kind:"primary",disabled:o,icon:o?$:void 0,style:s.Margin.smallRight,onPress:u},"Save"))},z.createElement(le,{value:r,onChangeText:m,placeholder:"Untitled",autoFocus:!0,disabled:o,maxLength:50,label:"Name",labelDescription:"This name will be used to identify the share link. Only visible to admins and creators in the content."}))}function Yn(t){let{content:e,contentRef:i,style:n}=t,[,o]=B(H),[a,r]=M.useState(null);return M.createElement(M.Fragment,null,M.createElement(w,{title:"Secret links",button:M.createElement(v,{icon:p.Plus,kind:"secondary",size:"medium",onPress:()=>r("create")},"Generate a new link"),style:n},M.createElement(M.Suspense,{fallback:M.createElement(Xe,null)},M.createElement(d,{style:[s.Margin.mediumBottom]},M.createElement(C,{style:[o.Label,o.textMid]},"Recipients can open link to read the content without signing up for GitBook account.")),M.createElement(Pi,{content:e,contentRef:i}))),a==="create"?M.createElement(Wn,{content:e,contentRef:i,onClose:()=>{r(null)}}):null)}function Pi(t){let{content:e,contentRef:i}=t,n=Ee.read(e),[o]=O([Gt(i)]);return M.createElement(M.Fragment,null,(o||[]).map(a=>{let r=Z(n,`${a.key}/`);return M.createElement(Qn,{url:r,shareLink:a,contentRef:i,content:e})}))}c();var F=R(S());N();function Xn(t){var u;let{contentRef:e}=t,i=Kt(e),[n]=O([i]),[o,a]=F.useState((u=n==null?void 0:n.fallbackURL)!=null?u:"");if(!n)return null;let r=()=>{i.update({fallbackURL:o})},m=()=>{a(n.fallbackURL)};return F.createElement(d,{style:[s.Margin.largeTop]},F.createElement(an,{label:"Authentication backend",labelDescription:"Choose the backend used to authenticate visitors.",items:Ci,value:"custom",onValueChange:()=>{},style:[s.Margin.largeBottom]}),F.createElement(le,{size:"medium",label:"Private key",labelDescription:F.createElement(F.Fragment,null,"Sign a JSON Web Token using the following key."," ",F.createElement(hn,{kind:"in-text-muted",path:"/advanced-guides/advanced-sharing-and-security/visitor-authentication"},"Learn more about how to implement the authentication"),"."),readOnly:!0,copyable:!0,value:n.privateKey,style:[s.Margin.largeBottom]}),F.createElement(le,{size:"medium",label:"Fallback URL",labelDescription:F.createElement(F.Fragment,null,"Configure a fallback URL for unauthenticated access. GitBook will redirect visitors to this url."),value:o,onChangeText:a,placeholder:"https://example.com/fallback",onSubmit:r}),o!==n.fallbackURL?F.createElement(d,{style:[s.Margin.largeTop,y.directionRow,y.justifyContentEnd]},F.createElement(v,{kind:"secondary",size:"medium",onPress:m,style:s.Margin.smallRight},"Cancel"),F.createElement(v,{kind:"primary",size:"medium",onPress:r},"Save")):null)}var Ci=[{value:"custom",label:"Custom"}];var Jn=[{label:"Publish with visitor authentication",labelDescription:"Authenticate visitors via your custom backend or integrations.",visibility:"visitor-auth"},{label:"Publish with share links",labelDescription:"Generate secret public share links. Revoke any time.",visibility:"share-link"},{label:"Publish as unlisted",labelDescription:"Publish as a public url, not indexed by search engines.",visibility:"unlisted"}];function Zn(t){let{content:e,contentRef:i}=t,{navigate:n}=pe(),o=Ie(e,"publish-space-visitor-auth"),a=Ie(e,"publish-space-share-links"),r=Ie(e,"publish-space-unlisted"),m=[o,a,r].filter(De)[0],u=Jn.find(l=>l.visibility===e.visibility),g=Jn.filter(l=>l.visibility!==e.visibility);return D.createElement(ne,{title:"Share to an audience",subtitle:"Publish this content to be accessed by a controlled audience, such as users or partners."},!m&&e.visibility==="public"?D.createElement(se,{kind:"info",title:"This content is already published publicly",details:D.createElement(D.Fragment,null,"Before changing the visibility to a restricted audience, you need to"," ",D.createElement(W,{kind:"in-text-muted",onPress:()=>{n({current:{sideSheet:{type:"share",tab:"publish"}}})}},"unpublish it"),"."),style:s.Margin.mediumBottom}):null,m?D.createElement(se,{kind:"upgrade",title:"Audience sharing requires the Pro plan",details:"Please subscribe or upgrade your subscription to be able to access advanced publishing options like Visitor Authentication, Share Links.",style:s.Margin.mediumBottom,actions:[{label:m.children,onPress:()=>{m.onPress()},buttonKind:"upgrade"}]}):null,L(e)&&x(i)?D.createElement(mt,{content:e,contentRef:i}):null,u?D.createElement(D.Fragment,null,D.createElement(ve,{label:u.label,labelDescription:u.labelDescription,content:e,visibility:u.visibility},e.visibility==="visitor-auth"?D.createElement(Xn,{contentRef:i}):null),e.visibility==="share-link"?D.createElement(Yn,{content:e,contentRef:i,style:s.Margin.mediumTop}):null,D.createElement(st,{content:e,contentRef:i,style:s.Margin.mediumTop}),D.createElement(ct,{style:s.Margin.mediumTop}),D.createElement(ut,{style:[s.Margin.largeVertical]},"or other options")):null,g.map((l,h)=>D.createElement(ve,{key:l.visibility,style:h>0?s.Margin.mediumTop:null,label:l.label,labelDescription:l.labelDescription,content:e,visibility:l.visibility,disabled:(l.visibility==="visitor-auth"?!!o:!1)||(l.visibility==="share-link"?!!a:!1)||(l.visibility==="unlisted"?!!r:!1)})))}c();function dt(t){return["share-link","visitor-auth","unlisted"].includes(t)}function ei(t){let{content:e,style:i}=t,[,n]=B(H),o=Ee.read(e),a=L(e)?"space is":"collection is";return b.createElement(w,{title:"Publishing visibility",style:i,button:b.createElement(de,{size:"small",icon:p.Settings,to:{current:{sideSheet:{type:"share",tab:dt(e.visibility)?"audience":"publish"}}}},"Manage visibility")},b.createElement(d,{style:[y.directionRow]},b.createElement(d,{style:[s.Margin.mediumRight]},b.createElement(Je,{size:ue.BUTTON_M,icon:Ct[e.visibility]})),b.createElement(d,{style:[y.flex1]},b.createElement(C,{selectable:!0,style:[n.Label,n.text]},(()=>{switch(e.visibility){case"public":return b.createElement(b.Fragment,null,"This ",a," currently"," ",b.createElement(C,{style:n.Bold},"published to the web"),". Anyone with the"," ",b.createElement(W,{kind:"in-text-muted",url:Z(o)},"link")," ","can read it. Its published content"," ",b.createElement(C,{style:n.Bold},"can be indexed")," by search engines.");case"unlisted":return b.createElement(b.Fragment,null,"This ",a," currently"," ",b.createElement(C,{style:n.Bold},"published to the web"),". Anyone with the"," ",b.createElement(W,{kind:"in-text-muted",url:Z(o)},"link")," ","can read it. Its published content will"," ",b.createElement(C,{style:n.Bold},"not")," be indexed by search engines.");case"visitor-auth":return b.createElement(b.Fragment,null,"This ",a," currently published under a"," ",b.createElement(W,{kind:"in-text-muted",url:Z(o)},"link"),". Access to the published content is"," ",b.createElement(C,{style:n.Bold},"restricted to authenticated visitors")," ","through a custom backend.");case"share-link":return b.createElement(b.Fragment,null,"This ",a," currently published under secret share links."," ",b.createElement(C,{style:n.Bold},"Anyone with the links can read its content"),".");case"private":return b.createElement(b.Fragment,null,"This ",L(e)?"space":"collection"," is not published and is accessible only by the members listed below.");case"in-collection":return b.createElement(b.Fragment,null,"This space is published under a"," ",b.createElement(W,{kind:"in-text-muted",url:Z(o)},"collection"),". Access to its content is controlled at the collection level.");default:Ge(e.visibility)}})()))))}function ti(t){let{content:e}=t;return j.createElement(ne,{title:"Who can access this content?",subtitle:"Audit who can access this content, with what permissions."},xe(e)?j.createElement(ki,null):j.createElement(j.Fragment,null,j.createElement(ei,{content:e,style:s.Margin.mediumBottom}),j.createElement(j.Suspense,{fallback:j.createElement(w,{title:"Members access"},j.createElement(Xe,null))},j.createElement($n,{...t}))))}function ki(){return j.createElement(w,null,j.createElement(ee,{icon:()=>j.createElement(me,{icon:p.SpacePrivate,kind:"secondary",size:"large"}),label:"Private content",labelDescription:"This content is private and only accessible by you."}))}c();var U=R(S());N();function ni(t){let{content:e,contentRef:i}=t,{navigate:n}=pe();return U.createElement(ne,{title:"Publish to the web",subtitle:"Share your content online with a customizable layout."},dt(e.visibility)?U.createElement(se,{kind:"info",title:"This content is already published to an audience",details:U.createElement(U.Fragment,null,"Before publishing this content to the web, you need to"," ",U.createElement(W,{kind:"in-text-muted",onPress:()=>{n({current:{sideSheet:{type:"share",tab:"audience"}}})}},"disable the audience sharing"),"."),style:s.Margin.mediumBottom}):null,L(e)&&x(i)?U.createElement(mt,{content:e,contentRef:i}):null,U.createElement(ve,{label:`Publish this ${L(e)?"space":"collection"} to the web`,labelDescription:"With an unique configurable URL, indexable by search engines.",content:e,visibility:"public"}),!L(e)&&e.visibility!=="private"&&e.publishingType==="variants"&&!e.primarySpace?U.createElement(d,{style:[s.Margin.mediumTop]},U.createElement(se,{details:U.createElement(U.Fragment,null,"This Collection is published but none of its spaces have been published as part of the Collection. You need to publish at least of one its Space as part of the Collection."),kind:"danger"})):null,e.visibility==="public"?U.createElement(U.Fragment,null,U.createElement(st,{content:e,contentRef:i,style:s.Margin.mediumTop}),U.createElement(ct,{style:s.Margin.mediumTop})):null)}var xi=[{key:"invite",title:"Invite members",icon:p.Users,component:Kn,visible:(t,e)=>!xe(t)&&!!t.organization&&be(e,"edit-permissions")},{key:"publish",title:"Publish to the web",icon:p.PublishStatusPublic,component:ni,visible:(t,e)=>!xe(t)&&be(e,"publish-content")},{key:"audience",title:"Share to an audience",icon:p.PublishStatusShareLink,component:Zn,visible:(t,e)=>!xe(t)&&be(e,"publish-content")},{key:"pdf",title:"Export as PDF",icon:p.PDF,component:_n,visible:(t,e)=>L(t)},{key:"permissions",title:"Who can access?",icon:p.Eye,component:ti,visible:(t,e)=>!!t.organization&&be(e,"view-permissions")}];function wi(t){let{tab:e,onChangeTab:i,content:n,contentRef:o}=t,a=ot(o),r=A.useMemo(()=>xi.filter(l=>l.visible(n,a)),[n,a]),m=r.find(l=>l.key===e),[u,g]=zn(n);return it(L(n)?I(n,{screen:"space_share",screenTab:e}):V(n,{screen:"collection_share",screenTab:e}),[e]),A.useEffect(()=>{var l;(l=m==null?void 0:m.disabled)!=null&&l.call(m,n,a)&&i(xn(n))},[m,n,a]),u?A.createElement(Vn,{content:n,onBack:()=>g(!1)}):A.createElement(on,{sidebar:A.createElement(d,{style:[y.flex1]},A.createElement(d,{style:[y.flex1]},A.createElement(Rt,{direction:"vertical"},r.map(l=>{var h,G;return A.createElement(Rt.Tab,{key:l.key,icon:l.icon,active:e===l.key,onPress:()=>i(l.key),disabled:(h=l.disabled)==null?void 0:h.call(l,n,a),title:(G=l.disabled)!=null&&G.call(l,n,a)?"Private content cannot be shared.":void 0},l.title)}))),A.createElement(d,{style:[y.directionRow]},A.createElement(A.Suspense,{fallback:null},A.createElement(rt,{icon:p.Link,size:"medium",content:n}))))},m?A.createElement(m.component,{...t}):A.createElement(Jt,{title:"Permissions denied"},"You don't have access to these settings."))}export{wi as default};
/*! Bundled license information:

is-email-maybe/dist/index.umd.js:
  (**
   * @name isEmailMaybe
   * @license MIT
   * @copyright (c) 2016 Kent C. Dodds
   * @author Kent C. Dodds <kent@doddsfamily.us> (kentcdodds.com)
   *)
*/
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/ShareModalBody.lazycomponent.legacy-M6CKHJNQ.min.js.map
