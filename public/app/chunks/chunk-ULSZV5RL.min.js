import{g as c,i as S,j as R,t as v}from"https://app.gitbook.com/public/app/chunks/chunk-LOPLMUZU.min.js";import{a as w,b as k}from"https://app.gitbook.com/public/app/chunks/chunk-M64GIA4V.min.js";import{Ja as P,La as y,Na as C,Pa as b,cc as T,ia as h}from"https://app.gitbook.com/public/app/chunks/chunk-4WQJWWQB.min.js";import{Xa as p,cb as m,eb as d,fb as g}from"https://app.gitbook.com/public/app/chunks/chunk-JFUPD3OE.min.js";import{c as f}from"https://app.gitbook.com/public/app/chunks/chunk-CIHAFBKJ.min.js";import{p as V}from"https://app.gitbook.com/public/app/chunks/chunk-A6UFY6RP.min.js";import{e as O,l as a}from"https://app.gitbook.com/public/app/chunks/chunk-OAKVUAEN.min.js";a();a();a();function x(e){return e.collection("share-links")}function D(e,n){return x(e).doc(n)}a();function I(e){let n=e.parent.id,r=e.id;return p().collection(`visitor-auth-${n}`).doc(r)}async function J(e,n){await m(async r=>{let t=await g(r,e),i=S(t),o=R(e),s=t.path;if(!s)throw new Error("Cannot update path of content if no path");let l=await d(r,c(i,n));if(l&&!l.deprecated&&!v(o,l))throw new f.Conflict("Path is already taken");r.update(c(i,s),{deprecated:!0}),r.set(c(i,n),{path:n,deprecated:!1,...o}),r.update(e,{path:n})})}function re(e){return e.visibility==="public"?"publish":h(e)?"permissions":e.organization?"invite":"publish"}a();function le(e,n){let[r,t]=T([typeof n=="number"?k(e,n):null,typeof n=="string"?w(e,n):null]);return t!=null&&t.result?t.result:r!=null&&r.result?r.result[0]:null}a();var u=O(V());function Pe(e,n){let r=u.default.useRef(null),[t,i]=u.default.useMemo(()=>z(e,n.page,r.current),[e,n]);return i&&(r.current={revision:e,currentPage:i,currentPagePath:n.page}),[t,i]}function z(e,n,r){let t=C(e,n);if(!t){if(!r||r.currentPagePath!==n)return[void 0,null];let o=e.pages[r.currentPage.key]||A(r.revision,e,r.currentPage.key);if(!o||o.kind==="link")return[void 0,null];t=o}if(t.kind==="group"&&(t=H(e,t),!t))return[void 0,null];let i=b(e,t.key);return[i!==n?{page:i}:void 0,t]}function A(e,n,r){let t=n.pages[r];if(t&&t.kind!=="link")return t;let i=P(e,r);if(i)return A(e,n,i.key);let o=n.rootPages.find(s=>n.pages[s].kind==="sheet");return o?n.pages[o]:null}function H(e,n){let r=n.pages.find(i=>{var o;return((o=e.pages[i])==null?void 0:o.kind)==="sheet"});if(r)return e.pages[r];let t=y(e,n.key,{filterPage:i=>i.kind!=="link"});return(t==null?void 0:t.kind)==="sheet"?t:(t==null?void 0:t.kind)==="group"?H(e,t):null}export{x as a,D as b,I as c,J as d,le as e,Pe as f,re as g};
//# sourceMappingURL=https://app.gitbook.com/public/app/chunks/chunk-ULSZV5RL.min.js.map
